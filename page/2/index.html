<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
<meta property="og:type" content="website">
<meta property="og:title" content="xfFelix的博客">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="xfFelix的博客">
<meta property="og:description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="xfFelix">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>xfFelix的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="xfFelix的博客" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">xfFelix的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">程序员的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/24/flutter-layout/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xfFelix">
      <meta itemprop="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xfFelix的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/24/flutter-layout/" class="post-title-link" itemprop="url">flutter-layout</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-24 11:41:44" itemprop="dateCreated datePublished" datetime="2020-03-24T11:41:44+08:00">2020-03-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-22 23:43:34" itemprop="dateModified" datetime="2020-05-22T23:43:34+08:00">2020-05-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/flutter/" itemprop="url" rel="index"><span itemprop="name">flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>LinerLayout在Flutter中等价于什么（Android）？</li>
<li>RelativeLayout在Flutter中等价于什么（Android）？</li>
<li>如何使用widget定义布局属性？</li>
<li>如何分层布局？</li>
<li>如何设置布局样式？</li>
<li>ScrollView在Flutter中等价于什么？</li>
<li>谁是Flutter的列表组件？</li>
<li>如何知道点击了列表中的哪个item？</li>
<li>如何动态更新ListView？</li>
</ul>
<h2 id="LinerLayout在Flutter中等价于什么（Android）？"><a href="#LinerLayout在Flutter中等价于什么（Android）？" class="headerlink" title="LinerLayout在Flutter中等价于什么（Android）？"></a>LinerLayout在Flutter中等价于什么（Android）？</h2><p>在Android中，使用LinerLayout来使你的控件呈现水平或者垂直排列。在Flutter中，你可以使用Row或者Column widget来实现相同的结果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Row(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: <span class="xml"><span class="tag">&lt;<span class="name">Widget</span>&gt;</span>[</span></span><br><span class="line"><span class="xml">      Text('Row one'),</span></span><br><span class="line"><span class="xml">      Text('Row two'),</span></span><br><span class="line"><span class="xml">      Text('Row three'),</span></span><br><span class="line"><span class="xml">      Text('Row four'),</span></span><br><span class="line"><span class="xml">    ]</span></span><br><span class="line"><span class="xml">  );</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Column(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: <span class="xml"><span class="tag">&lt;<span class="name">Widget</span>&gt;</span>[</span></span><br><span class="line"><span class="xml">      Text('Row one'),</span></span><br><span class="line"><span class="xml">      Text('Row two'),</span></span><br><span class="line"><span class="xml">      Text('Row three'),</span></span><br><span class="line"><span class="xml">      Text('Row four'),</span></span><br><span class="line"><span class="xml">    ]</span></span><br><span class="line"><span class="xml">  );</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="RelativeLayout-在Flutter中等价于什么（Android）"><a href="#RelativeLayout-在Flutter中等价于什么（Android）" class="headerlink" title="RelativeLayout 在Flutter中等价于什么（Android）"></a>RelativeLayout 在Flutter中等价于什么（Android）</h2><p>RelativeLayout用于使widget相对于彼此的位置排列。在Flutter中，有几种方法可以实现相同的结果。</p>
<p>可以通过使用<code>Column</code>,<code>Row</code>,<code>Stack</code>的组合来实现<code>RelativeLayout</code>的效果。可以为widget构造函数指定相对于父组件的布局规则。</p>
<h2 id="如何使用widget定义布局属性？"><a href="#如何使用widget定义布局属性？" class="headerlink" title="如何使用widget定义布局属性？"></a>如何使用widget定义布局属性？</h2><p>在RN中，大多数布局都可以使用传递给特定的组件的props来完成。例如，您可以使用View组件上的样式props来指定flexbox属性。要在列中排列组件，您可以指定一个prop，例如：flexDirection: column。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;View style=&#123;</span><br><span class="line">  &#123;</span><br><span class="line">    flex: <span class="number">1</span>,</span><br><span class="line">    flexDirection: <span class="string">"column"</span>,</span><br><span class="line">    justifyContent: <span class="string">"space-between"</span>,</span><br><span class="line">    alignItems: <span class="string">"center"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;&gt;</span><br></pre></td></tr></table></figure>

<p>在Flutter中，布局主要由专门设计用于提供布局的小部件定义，并结合控件widget及其样式属性</p>
<p>例如：列和行widget控制一个数组中的条目并且分别垂直和水平对齐它们，Cotainer widget控制一个布局的样式和属性，并且Center widget负责剧中它的子widget。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Center(</span><br><span class="line">  child: Column(</span><br><span class="line">    children: <span class="xml"><span class="tag">&lt;<span class="name">Widget</span>&gt;</span>[</span></span><br><span class="line"><span class="xml">      Container(</span></span><br><span class="line"><span class="xml">        color: Colors.red,</span></span><br><span class="line"><span class="xml">        width: 100,</span></span><br><span class="line"><span class="xml">        height: 100</span></span><br><span class="line"><span class="xml">      ),</span></span><br><span class="line"><span class="xml">      Container(</span></span><br><span class="line"><span class="xml">        color: Colors.blue,</span></span><br><span class="line"><span class="xml">        width: 100,</span></span><br><span class="line"><span class="xml">        height: 100</span></span><br><span class="line"><span class="xml">      ),</span></span><br><span class="line"><span class="xml">      Container(</span></span><br><span class="line"><span class="xml">        color: Colors.green,</span></span><br><span class="line"><span class="xml">        width: 100,</span></span><br><span class="line"><span class="xml">        height: 100</span></span><br><span class="line"><span class="xml">      ),</span></span><br><span class="line"><span class="xml">    ]</span></span><br><span class="line"><span class="xml">  )</span></span><br><span class="line"><span class="xml">)</span></span><br></pre></td></tr></table></figure>

<p>Flutter的核心widget库中提供了各种布局小部件。例如：<code>Padding</code>, <code>Align</code>和<code>Stack</code></p>
<h2 id="如何分层布局"><a href="#如何分层布局" class="headerlink" title="如何分层布局"></a>如何分层布局</h2><p>在React Native中，组件可以使用absolute定位来分层</p>
<p>Flutter使用<code>Stack</code> widget控制子widget在一层。子widget可以完全或者部分覆盖基础widget。</p>
<p><code>Stack</code>控件将其子项相对于其框的边缘定位。如果您只想重叠多个子窗口小部件，这个类很有用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Stack(</span><br><span class="line">  alignment: Alignment(<span class="number">0.6</span>,<span class="number">0.6</span>),</span><br><span class="line">  children: <span class="xml"><span class="tag">&lt;<span class="name">Widget</span>&gt;</span>[</span></span><br><span class="line"><span class="xml">    CircleAvatar(</span></span><br><span class="line"><span class="xml">      backgroundImage: NetworkImage("https://avatars3.githubusercontent.com/u/14101776?v=4")</span></span><br><span class="line"><span class="xml">    ),</span></span><br><span class="line"><span class="xml">    Container(</span></span><br><span class="line"><span class="xml">      decoration: BoxDecoration(color: Colors.black45),</span></span><br><span class="line"><span class="xml">      child: Text('Flutter')</span></span><br><span class="line"><span class="xml">    )</span></span><br><span class="line"><span class="xml">  ]</span></span><br><span class="line"><span class="xml">)</span></span><br></pre></td></tr></table></figure>

<h2 id="如何设置布局样式"><a href="#如何设置布局样式" class="headerlink" title="如何设置布局样式"></a>如何设置布局样式</h2><p>Flutter没有内联样式和Stylesheet.create的概念，它有一套独特的布局系统，Padding、<code>Center</code>、<code>Column</code>、<code>Row</code>、等都是widget，另外组件也通常接受用于布局样式的构造参数：比如<code>Text</code>widget可以使用<code>TextStyle</code>属性。如果要在多个位置使用相同的文本样式，你可以创建一个<code>TextStyle</code>类并应用于各个<code>Text</code>widget中</p>
<h2 id="ScrollView在Flutter中等价于什么？"><a href="#ScrollView在Flutter中等价于什么？" class="headerlink" title="ScrollView在Flutter中等价于什么？"></a>ScrollView在Flutter中等价于什么？</h2><p>在Android中，<code>ScrollView</code>允许您包含一个子控件，以便在用户设备的屏幕比控件内容小的情况下，使它们可以滚动。在Flutter中，最简单的方法是使用ListView。但在Flutter中，一个<code>ListView</code>既是一个ScrollView，也是一个Android ListView</p>
<p>在iOS中，你给view包裹上ScrollView来允许用户在需要时滚动你的内容。在Flutter中，最简单的方法是使用ListView widget。它表现的既和iOS中的ScrollView一致，也能和TableView一致，因为你可以给它的widget做垂直排布。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> ListView(</span><br><span class="line">    children: <span class="xml"><span class="tag">&lt;<span class="name">Widget</span>&gt;</span>[</span></span><br><span class="line"><span class="xml">      Text('Row One'),</span></span><br><span class="line"><span class="xml">      Text('Row Two'),</span></span><br><span class="line"><span class="xml">      Text('Row Three'),</span></span><br><span class="line"><span class="xml">      Text('Row Four'),</span></span><br><span class="line"><span class="xml">    ]</span></span><br><span class="line"><span class="xml">  );</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="谁是Flutter的列表组件？"><a href="#谁是Flutter的列表组件？" class="headerlink" title="谁是Flutter的列表组件？"></a>谁是Flutter的列表组件？</h2><ul>
<li>在iOS中，通常用<code>UITableView</code>或<code>UICollectionView</code>来展示一个列表；</li>
<li>在Android中，通常用<code>ListView</code>或<code>RecyclerView</code>来展示一个列表；</li>
<li>在RN中，通常用<code>FlatList</code>或者<code>SectionList</code>来展示一个列表；</li>
</ul>
<p>在Flutter中，你可以用ListView来达到相似的目的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(Simple());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Simple</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Simple App'</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _SampleAppState createState() =&gt; _SampleAppState();</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">'Sample App'</span>),),</span><br><span class="line">      body: ListView(</span><br><span class="line">        children: _getListData(),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  List&lt;Widget&gt; _getListData () &#123;</span><br><span class="line">    List&lt;Widget&gt; widgets = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      widgets.add(Padding(padding: EdgeInsets.all(<span class="number">10</span>), <span class="attr">child</span>: Text(<span class="string">'Row $i'</span>),));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> widgets;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在Android ListView中，您可以创建一个适配器，然后您可以将它传递给ListView，该适配器将使用适配器返回的内容来展示每一行，从上面的代码不难看出，在Flutter中没有adapter的等价物，我们唯一要做的就是控制这个list中要展示的数据。</p>
</blockquote>
<h2 id="如何知道点击了列表中的哪个item？"><a href="#如何知道点击了列表中的哪个item？" class="headerlink" title="如何知道点击了列表中的哪个item？"></a>如何知道点击了列表中的哪个item？</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(Simple());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Simple</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Simple App'</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _SampleAppState createState() =&gt; _SampleAppState();</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">'Sample App'</span>),),</span><br><span class="line">      body: ListView(</span><br><span class="line">        children: _getListData(),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  List&lt;Widget&gt; _getListData () &#123;</span><br><span class="line">    List&lt;Widget&gt; widgets = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      widgets.add(</span><br><span class="line">        GestureDetector(</span><br><span class="line">         child: Padding(padding: EdgeInsets.all(<span class="number">10</span>), <span class="attr">child</span>: Text(<span class="string">'Row $i'</span>),),</span><br><span class="line">         onTap: () &#123;</span><br><span class="line">           print(<span class="string">'row tapped'</span>);</span><br><span class="line">         &#125;, </span><br><span class="line">        )</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> widgets;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述代码中我们通过<code>GestureDetector</code>来监听item的点击事件</p>
<h2 id="如何动态更新ListView？"><a href="#如何动态更新ListView？" class="headerlink" title="如何动态更新ListView？"></a>如何动态更新ListView？</h2><ul>
<li>在iOS中，你改变列表的数据，并通过reloadData()方法来通知table或是collection view；</li>
<li>在Android中，改变列表数据后通过notifyDataSetChanged来更新列表；</li>
</ul>
<p>在Flutter中，如果你想通过<code>setState()</code>方法来更新widget列表，你会很快发现你的数据展示并没有变化。这是因为当<code>setState()</code>被调用时，Flutter渲染引擎会去检查widget树来查看是否有什么地方被改变了。当它得到你的<code>ListView</code>时，它会使用一个<code>==</code>判断，并且发现俩个<code>ListView</code>时相同的。没有什么东西是变了的，因此更新不是必须的。</p>
<p><strong>一个更新ListView的简单方法是，在setState()中创建一个新的List，并把旧List的数据拷贝给新的List</strong>。虽然这样很简单，但当数据集很大时，并不推荐这样做，来一起看一个demo：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(Simple());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Simple</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Simple App'</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _SampleAppState createState() =&gt; _SampleAppState();</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  List&lt;Widget&gt; widgets = [];</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      widgets.add(getRow(i));</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">'Sample App'</span>),),</span><br><span class="line">      body: ListView(</span><br><span class="line">        children: widgets,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget getRow(int i)&#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">      child: Padding(</span><br><span class="line">        child: Text(<span class="string">'Row $i'</span>),</span><br><span class="line">        padding: EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">      ),</span><br><span class="line">      onTap: () &#123;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">          widgets = List.from(widgets);</span><br><span class="line">          widgets.add(getRow(widgets.length + <span class="number">1</span>));</span><br><span class="line">          print(<span class="string">'row $i'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一个推荐的，高效的且有效的做法是，使用<code>ListView.Builder</code>来构建列表。这个方法在你想要构建动态列表，或是列表拥有大量数据时会非常好用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(Simple());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Simple</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Simple App'</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _SampleAppState createState() =&gt; _SampleAppState();</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SampleAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleAppPage</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  List&lt;Widget&gt; widgets = [];</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      widgets.add(getRow(i));</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">'Sample App'</span>),),</span><br><span class="line">      body: ListView.builder(</span><br><span class="line">        itemCount: widgets.length,</span><br><span class="line">        itemBuilder: (BuildContext context, int position) &#123;</span><br><span class="line">          <span class="keyword">return</span> getRow(position);</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget getRow(int i)&#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">      child: Padding(</span><br><span class="line">        child: Text(<span class="string">'Row $i'</span>),</span><br><span class="line">        padding: EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">      ),</span><br><span class="line">      onTap: () &#123;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">          widgets.add(getRow(widgets.length + <span class="number">1</span>));</span><br><span class="line">          print(<span class="string">'row $i'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>与创建一个<code>ListView</code>不同，创建一个<code>ListView.builder</code>接收俩个主要的参数：列表的初始长度，和一个itemBuilder方法。</p>
<p>itemBuilder方法和iOS的<code>cellForItemAt</code>代理方法非常类似，它接受一个位置，并且返回在这个位置上你希望渲染的cell。</p>
<p>最后，也是最重要的，注意<code>onTap()</code>函数里并没有重新创建一个<code>List</code>，而是<code>add</code>了一个widget。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/23/flutter-widget/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xfFelix">
      <meta itemprop="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xfFelix的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/23/flutter-widget/" class="post-title-link" itemprop="url">flutter-widget</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-23 11:16:49" itemprop="dateCreated datePublished" datetime="2020-03-23T11:16:49+08:00">2020-03-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-22 23:43:34" itemprop="dateModified" datetime="2020-05-22T23:43:34+08:00">2020-05-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/flutter/" itemprop="url" rel="index"><span itemprop="name">flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="如何更新Widgets"><a href="#如何更新Widgets" class="headerlink" title="如何更新Widgets"></a>如何更新Widgets</h2><p>在Android/ios中要更新视图，我们可以通过对应的方法来操作更改。在Flutter中，Widget是不可变的，不会直接更新。相反，我们可以通过操纵Widget的状态来更新它们。</p>
<p>这就是有状态和无状态的概念来源。StatelessWidget听起来就像是一个没有状态信息的Widget。</p>
<p>StatelessWidget适用于当我们描述的用户界面不依赖于对象中的配置信息时。</p>
<p>例如，在Android/ios中，我们需要用ImageView/UIImageView来显示logo。logo在运行时不会改变，因此在Flutter中使用StatelessWidget是最好的</p>
<p>如果要根据HTTP网络请求或用户交互后收到的数据动态更改ui，则必须使用StatefulWidget，并告诉Flutter框架Widget的状态已更新，以便更新该Widget。</p>
<p>无状态Widget和有状态Widget之间的重要区别在于StatefulWidget具有一个State对象，该对象存储状态数据并将其传到树重建中，因此状态不会丢失</p>
<blockquote>
<p>请记住以下规则：如果Widget在<code>build</code>之外更改（例如，运行时用户交互），则它是有状态的。如果Widget永远不会改变，一旦构建，它就是无状态的。但是，即使Widget是有状态的，如果包含它的父窗口小部件本身不对这些更改（或其他输入）作出反应，父Widget任然可以是无状态的。</p>
</blockquote>
<p>接下来，我们来看看如何使用一个StatelessWidget。Text就是一个简单的StatelessWidget。如果你查看Text Widget的实现，救会发现它是一个StatelessWidget的子类。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Text(<span class="string">'I like Flutter!'</span>, <span class="attr">style</span>: TextStyle(fontWeight: FontWeight.bold));</span><br></pre></td></tr></table></figure>

<p>正如你所看到的，Text没有与之关联的状态信息，它呈现了构造函数中传递的内容，仅此而已。</p>
<p>但是，如果想让“I like Flutter”动态变化，例如点击一个FloatActionButton。可以通过将Text包装在StatelessWidget中并在点击按钮时更新它来实现，如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(SampleApp());</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Sample App'</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage()</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  SampleApp(&#123;Key key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  SampleAppState createState() =&gt; SampleAppState();</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleApp</span>&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">String</span> textToShow = <span class="string">'I like flutter'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _updateText() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      textToShow = <span class="string">'Flutter is good'</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何布局"><a href="#如何布局" class="headerlink" title="如何布局"></a>如何布局</h2><ul>
<li>在Android中，我们通过xml编写布局</li>
<li>在Ios中，我们会用Storyboard文件来组织views，并对它们设置约束，或在view controller中使用代码来约束</li>
</ul>
<p>在Flutter中，我们通过编写一个widget树来声明布局</p>
<p>下面这个例子展示了一个带有padding的简单widget</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">    body: Center(</span><br><span class="line">      child: MaterialButton(</span><br><span class="line">        onPressed: () &#123;&#125;,</span><br><span class="line">        child: Text(<span class="string">'hello world'</span>),</span><br><span class="line">        padding: EdgeInsets.only(left: <span class="number">10</span>,<span class="attr">right</span>: <span class="number">10</span>),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何在布局中添加或者删除组件"><a href="#如何在布局中添加或者删除组件" class="headerlink" title="如何在布局中添加或者删除组件"></a>如何在布局中添加或者删除组件</h2><ul>
<li>在Android中，我们可以调用父级控件的addChild或removeChild方法以动态添加或删除View</li>
<li>在ios中，我们可以调用父view的addSubview()或在子view的removeFromSuperview来动态的添加或者删除子view</li>
</ul>
<p>在Flutter中，因为Widget是不可变的，所以没有类似的方法。相反，我们可以传入一个函数或者是表达式，该函数或者表达式返回一个Widget给父类，并通过bool值控制该Widget的创建。</p>
<p>例如，当点击一个FloatingActionButton时，如何在俩个widget之间切换：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SampleApp</span>&gt;</span>&#123;</span><br><span class="line">  bool toggle = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _toggle() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      toggle = !toggle;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _getToggleChild() &#123;</span><br><span class="line">    <span class="keyword">if</span> (toggle) &#123;</span><br><span class="line">      <span class="keyword">return</span> Text(<span class="string">'Toggle one'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> MaterialButton(</span><br><span class="line">        child: Text(<span class="string">'Toggle two'</span>),</span><br><span class="line">        onPressed: ()&#123;&#125;,</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(<span class="string">'Sample App'</span>),),</span><br><span class="line">      body: Center(child: _getToggleChild(),),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        child: Icon(Icons.update),</span><br><span class="line">        onPressed: _toggle,</span><br><span class="line">        tooltip: <span class="string">'Uppdate Text'</span>,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Widget实现动画"><a href="#Widget实现动画" class="headerlink" title="Widget实现动画"></a>Widget实现动画</h2><ul>
<li>在Android中，我们可以通过xml创建动画或者调用view.animate()</li>
<li>在Ios中，可以通过调用animate(withDuration: animations:)方法来给一个view创建动画</li>
</ul>
<p>在Flutter中，使用动画库来包裹widget，而不是创建一个动画widget</p>
<p>在Flutter中，使用AnimationController，这是一个可以暂停、寻找、停止、反转动画的Animation类型。它需要一个Ticker当vsync发生时来发送信号，并且在每帧运行时创建一个介于0~1之间的线性插值（interpolation）。我们可以创建一个或多个的Animation并附加一个Controller。</p>
<p>例如，我们可能会用CurvedAnimation来实现一个interpolated曲线。在这个场景中，controller是动画过程的“主人”，而CurvedAnimation计算曲线，并替代controller默认的线性模式</p>
<p>当构建widget树时，你会把Animation指定给一个widget的动画属性，比如FadeTransition的opacity，并告诉控制器的开始动画</p>
<p>下面举个例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="comment">// This widget is the root of your application.</span></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Fade Demo'</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        <span class="comment">// This is the theme of your application.</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// Try running your application with "flutter run". You'll see the</span></span><br><span class="line">        <span class="comment">// application has a blue toolbar. Then, without quitting the app, try</span></span><br><span class="line">        <span class="comment">// changing the primarySwatch below to Colors.green and then invoke</span></span><br><span class="line">        <span class="comment">// "hot reload" (press "r" in the console where you ran "flutter run",</span></span><br><span class="line">        <span class="comment">// or simply save your changes to "hot reload" in a Flutter IDE).</span></span><br><span class="line">        <span class="comment">// Notice that the counter didn't reset back to zero; the application</span></span><br><span class="line">        <span class="comment">// is not restarted.</span></span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: MyFadeTest(title: <span class="string">'Fade demo'</span>),);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">      </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyFadeTest</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span></span>&#123;</span><br><span class="line">  <span class="keyword">var</span> title;</span><br><span class="line"></span><br><span class="line">  MyFadeTest(&#123;Key key, <span class="keyword">this</span>.title&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">  @override</span><br><span class="line">  MyFadeTestState createState() =&gt; MyFadeTestState();</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyFadeTestState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyFadeTest</span>&gt; <span class="title">with</span> <span class="title">TickerProviderStateMixin</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  AnimationController controller;</span><br><span class="line"></span><br><span class="line">  CurvedAnimation curve;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    controller = AnimationController(duration: Duration(milliseconds: <span class="number">2000</span>), <span class="attr">vsync</span>: <span class="keyword">this</span>);</span><br><span class="line">    curve = CurvedAnimation(parent: controller, <span class="attr">curve</span>: Curves.easeIn);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: Text(widget.title),),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Container(</span><br><span class="line">          child: FadeTransition(</span><br><span class="line">            opacity: curve,</span><br><span class="line">            child: FlutterLogo(size: <span class="number">100</span>,),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        tooltip: <span class="string">'Fade'</span>,</span><br><span class="line">        child: Icon(Icons.brush),</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">          controller.forward();</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何绘图（Canvas-draw-paint）"><a href="#如何绘图（Canvas-draw-paint）" class="headerlink" title="如何绘图（Canvas draw/paint）"></a>如何绘图（Canvas draw/paint）</h2><ul>
<li>在Android中，可以使用Canvas与Drawable在屏幕上绘制出自定义形状和图片</li>
<li>在Ios上，可以通过CoreGraphics来在屏幕上绘制线条和形状</li>
<li>在RN中我们通常是由react-native-canvas插件来进行绘图</li>
</ul>
<p>Flutter也有类似的Canvas API，因为它基于相同的底层渲染引擎Skia。因此，对于Android开发人员来说，在Flutter中绘制到画布是一件非常熟悉的任务。Flutter有俩个类可以帮助我们绘制画布，CustomPaint和CustomPainter，它们实现算法以绘制到画布。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MaterialApp(home: DemoApp(),));</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) =&gt;Scaffold(body: Signature(),);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Signature</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span></span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  SignatureState createState() =&gt; SignatureState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SignatureState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">Signature</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  List&lt;Offset&gt; _points = <span class="xml"><span class="tag">&lt;<span class="name">Offset</span>&gt;</span>[];</span></span><br><span class="line"></span><br><span class="line"><span class="xml">  @override</span></span><br><span class="line"><span class="xml">  Widget build(BuildContext context) &#123;</span></span><br><span class="line"><span class="xml">    // TODO: implement build</span></span><br><span class="line"><span class="xml">    return GestureDetector(</span></span><br><span class="line"><span class="xml">      onPanUpdate: (DragUpdateDetails details) &#123;</span></span><br><span class="line"><span class="xml">        setState(() &#123;</span></span><br><span class="line"><span class="xml">          RenderBox referenceBox = context.findRenderObject();</span></span><br><span class="line"><span class="xml">          Offset localPosition = referenceBox.globalToLocal(details.globalPosition);</span></span><br><span class="line"><span class="xml">          _points = List.from(_points)..add(localPosition);</span></span><br><span class="line"><span class="xml">        &#125;);</span></span><br><span class="line"><span class="xml">      &#125;,</span></span><br><span class="line"><span class="xml">      onPanEnd: (DragEndDetails details) =&gt; _points.add(null),</span></span><br><span class="line"><span class="xml">      child: CustomPaint(painter: SignaturePainter(_points), size: Size.infinite,),</span></span><br><span class="line"><span class="xml">    );</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">  </span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">class SignaturePainter extends CustomPainter&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">  SignaturePainter(this.points);</span></span><br><span class="line"></span><br><span class="line">  List&lt;Offset&gt; points;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void paint(Canvas canvas, Size size) &#123;</span><br><span class="line">    // TODO: implement paint</span><br><span class="line">    var paint = Paint()</span><br><span class="line">    ..color = Colors.black</span><br><span class="line">    ..strokeCap = StrokeCap.round</span><br><span class="line">    ..strokeWidth = 5.0;</span><br><span class="line">    for (int i = 0; i &lt; points.length - 1; i++) &#123;</span><br><span class="line">      if (points[i] != null &amp;&amp; points[i + 1] != null)</span><br><span class="line">        canvas.drawLine(points[i], points[i + 1], paint);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool shouldRepaint(SignaturePainter other) =&gt; other.points != points;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="绘制圆形和方形"><a href="#绘制圆形和方形" class="headerlink" title="绘制圆形和方形"></a>绘制圆形和方形</h2><p>在Flutter中，你可以使用<code>CustomPaint</code>和<code>CustomPainter</code>类去绘制到画布上</p>
<p>以下示例显示如何使用<code>CustomPaint</code>widget在绘制阶段绘制。它实现了抽象类CustomPainter，并将其传递给CustomPaint的painter属性。CustomPaint字类必须实现paint和shouldRepaint方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'Flutter bottomNavigationBar'</span>,</span><br><span class="line">      theme: ThemeData.fallback(),</span><br><span class="line">      home: _MyCanvas(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyCanvas</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      body: CustomPaint(</span><br><span class="line">        painter: MyCanvasPainter(),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCanvasPainter</span> <span class="keyword">extends</span> <span class="title">CustomPainter</span></span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  <span class="keyword">void</span> paint(Canvas canvas, Size size) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement paint</span></span><br><span class="line">    Paint paint = Paint();</span><br><span class="line">    paint.color = Colors.amber;</span><br><span class="line">    canvas.drawCircle(Offset(<span class="number">100</span>, <span class="number">200</span>), <span class="number">40</span>, paint);</span><br><span class="line">    Paint paintRect = Paint();</span><br><span class="line">    paintRect.color = Colors.lightBlue;</span><br><span class="line">    Rect rect = Rect.fromPoints(Offset(<span class="number">150</span>, <span class="number">300</span>), Offset(<span class="number">300</span>, <span class="number">400</span>));</span><br><span class="line">    canvas.drawRect(rect, paintRect);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool shouldRepaint(MyCanvasPainter oldDelegate) =&gt; <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  bool shouldRebuildSemantics(MyCanvasPainter oldDelegate) =&gt; <span class="literal">false</span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何构建自定义Widget"><a href="#如何构建自定义Widget" class="headerlink" title="如何构建自定义Widget"></a>如何构建自定义Widget</h2><ul>
<li>在Andorid中，可以通过继承View或已存在的某个控件，然后覆盖其绘制方法来实现自定义View</li>
<li>在iOS中，可以通过编写UIView的子类，或使用已存在的view来重载并实现该方法。以达到特定的功能</li>
</ul>
<p>在Flutter中，推荐组合多个小的widget来构建一个自定义的widget（而不是扩展它）</p>
<p>举个例子，如果你要构建一个CustomButton，并在构造器中传入它的label。那就组合RaisedButton和label，而不是扩展RaisedButton</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomButton</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  CustomButton(<span class="keyword">this</span>.label);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> label;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> RaisedButton(</span><br><span class="line">      onPressed: ()&#123;&#125;,</span><br><span class="line">      child: Text(label),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> CustomButton(<span class="string">'这是一个自定义的按钮'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何设置widget的透明度"><a href="#如何设置widget的透明度" class="headerlink" title="如何设置widget的透明度"></a>如何设置widget的透明度</h2><ul>
<li>在iOS中，什么东西都会有一个.opacity或是.alpha的属性</li>
<li>在Android中View有setAlpha的方法</li>
</ul>
<p>在Flutter中如果要改变透明度，我们可以给widget包裹一个Opacity widget来做到这一点</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Opacity&#123;</span><br><span class="line">  opacity: <span class="number">0.5</span>,</span><br><span class="line">  child: Text(<span class="string">'透明度50%'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/flutter-project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xfFelix">
      <meta itemprop="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xfFelix的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/flutter-project/" class="post-title-link" itemprop="url">flutter-project</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-20 16:52:06" itemprop="dateCreated datePublished" datetime="2020-03-20T16:52:06+08:00">2020-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-22 23:43:34" itemprop="dateModified" datetime="2020-05-22T23:43:34+08:00">2020-05-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/flutter/" itemprop="url" rel="index"><span itemprop="name">flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h2><p>一个通常的flutter项目结构是这样的：</p>
<ul>
<li>projectname<ul>
<li>android           - Android部分的工程文件</li>
<li>build             - 项目的构建输出目录</li>
<li>ios               - ios部分的工程目录</li>
<li>lib               - 项目中的Dart源文件<ul>
<li>src             - 包含其他源文件</li>
<li>main.dart       - 自动生成的项目入口文件，类似于RN中的index.js</li>
</ul>
</li>
<li>test              - 测试相关的文件</li>
<li>pubspec.yaml      - 项目依赖配置文件 类似于RN中的package.json</li>
</ul>
</li>
</ul>
<blockquote>
<p>大家也可以根据需要进行调整 </p>
</blockquote>
<h2 id="在哪里归档图片资源以及如何处理不同分辨率"><a href="#在哪里归档图片资源以及如何处理不同分辨率" class="headerlink" title="在哪里归档图片资源以及如何处理不同分辨率"></a>在哪里归档图片资源以及如何处理不同分辨率</h2><ul>
<li>虽然Android将resources和assets区别对待，但在Flutter中，他们都会被作为assets处理，所有存在Android上<code>res / drawable- *</code>文件夹中的资源都放在Flutter的assets中。</li>
<li>与Android类似，ios同样将images和assets作为不同的东西，而Flutter中只有assets。被放在ios中<code>images.xcasset</code>文件夹下的资源在Flutter中被放在assets文件夹中。</li>
</ul>
<p>在Flutter中<code>assets</code>可以是任意类型的文件，而不仅仅是图片。例如，你可以把json文件放置到<code>my-assets</code>文件夹中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my-assets/data.json</span><br></pre></td></tr></table></figure>

<p>记得在<code>pubspec.yaml</code>文件中声明<code>assets</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assets:</span><br><span class="line"> - my-assets/data.json</span><br></pre></td></tr></table></figure>

<p>然后我们在代码中可以通过<code>AssetBundle</code>来访问它：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span> show Feture;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/services.dart'</span> show rootBundle;</span><br><span class="line"></span><br><span class="line">Futurn&lt;<span class="built_in">String</span>&gt; loadAsset() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> rootBundle.loadString(<span class="string">'my-assets/data.json'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于图片，Flutter像Ios一样，遵循了一个简单的基于像素密度的格式。Image assets可能是1.0x 2.0x 3.0x 或是其他的任何倍数。这个devicePixelRatio表示了物理像素到单个逻辑像素的比率。</p>
<p>Android不同像素密度的图片和Flutter的像素比率的对应关系</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ldpi      <span class="number">0.75</span>x</span><br><span class="line">mdpi      <span class="number">1.0</span>x</span><br><span class="line">hdpi      <span class="number">1.5</span>x</span><br><span class="line">xhdpi     <span class="number">2.0</span>x</span><br><span class="line">xxhdpi    <span class="number">3.0</span>x</span><br><span class="line">xxxhdpi   <span class="number">4.0</span>x</span><br></pre></td></tr></table></figure>

<p>Assets可以被放置在任何属性文件夹中–Flutter并没有预先定义的文件结构。我们需要在<code>pubspec.yaml</code>文件中声明assets的位置，然后flutter会把它们识别出来。</p>
<p>举个例子，要把一个名为<code>my_icon.png</code>的图片放到flutter工程中，你可能想要把它放到images文件夹中。把图片（1.0x）放置到images文件夹中，并把其他分辨率的图片放在对应的子文件夹中，并接上合适的比例系数，就像这样：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">images<span class="regexp">/my_icon.png          /</span>/ <span class="string">base:</span> <span class="number">1.0</span>x image</span><br><span class="line">images<span class="regexp">/2.0x/</span>my_icon.png     <span class="comment">// 2.0x image</span></span><br><span class="line">images<span class="regexp">/3.0x/</span>my_icon.png     <span class="comment">// 3.0x image</span></span><br></pre></td></tr></table></figure>

<p>接下来就可以在<code>pubspec.yaml</code>文件中这样声明这个图片资源：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assets</span><br><span class="line"><span class="bullet"> - </span>images/my_icon.png</span><br></pre></td></tr></table></figure>

<p>现在我们可以借助AssetImage来访问它</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> AssetImage(<span class="string">'images/my_icon.png'</span>);</span><br></pre></td></tr></table></figure>

<p>也可以通过<code>Image</code>widget直接使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="function">Widget <span class="title">build</span><span class="params">(BuildContext context)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Image.asset(<span class="string">'images/my_icon.png'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何归档strings资源，以及处理不同的语言"><a href="#如何归档strings资源，以及处理不同的语言" class="headerlink" title="如何归档strings资源，以及处理不同的语言"></a>如何归档strings资源，以及处理不同的语言</h2><p>不像IOS拥有一个<code>Localizable.strings</code>文件，Flutter目前没有专门的字符串资源系统。目前，最佳做法是将strings资源作为静态字段保存在类中。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Strings</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> welcomeMessage = <span class="string">'welcome to flutter'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然年像以下方式来访问：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Text(Strings.welcomeMessage)</span><br></pre></td></tr></table></figure>

<p>默认情况下，Flutter只支持美式英语字符串。如果你要支持其他语言，请引入<code>flutter_localizations</code>包</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/flutter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xfFelix">
      <meta itemprop="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xfFelix的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/flutter/" class="post-title-link" itemprop="url">flutter Get Start</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-20 14:18:17 / 修改时间：22:48:39" itemprop="dateCreated datePublished" datetime="2020-03-20T14:18:17+08:00">2020-03-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/flutter/" itemprop="url" rel="index"><span itemprop="name">flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="学习文档"><a href="#学习文档" class="headerlink" title="学习文档"></a>学习文档</h2><p>官方文档：<a href="https://flutter.dev/docs" target="_blank" rel="noopener">https://flutter.dev/docs</a></p>
<p>中文版：<a href="https://flutterchina.club/" target="_blank" rel="noopener">https://flutterchina.club/</a></p>
<p>flutter pub: <a href="https://pub.dev/" target="_blank" rel="noopener">https://pub.dev/</a></p>
<h2 id="Fultter创建项目"><a href="#Fultter创建项目" class="headerlink" title="Fultter创建项目"></a>Fultter创建项目</h2><p>要创建一个flutter项目有俩种方式：</p>
<ul>
<li><p>从命令行使用<code>flutter create</code>命令，确保Flutter SDK配置了环境变量</p>
</li>
<li><p>使用安装了Flutter和Dart的插件</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flutter create &lt;projectname&gt;</span><br></pre></td></tr></table></figure>

<h2 id="运行Flutter项目"><a href="#运行Flutter项目" class="headerlink" title="运行Flutter项目"></a>运行Flutter项目</h2><p>俩种方式运行项目：</p>
<ul>
<li><p>项目的根目录使用<code>flutter run</code></p>
</li>
<li><p>在带有Flutter和Dart插件的IDE使用“run”选项</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flutter run -d <span class="string">'iPhone X'</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>-d</code>后面跟的是具体的设备名称，可以Android或ios模拟器的名字，也可以是一台已经连接到电脑上的Android或IOS的设备</p>
</blockquote>
<h2 id="导入Widget"><a href="#导入Widget" class="headerlink" title="导入Widget"></a>导入Widget</h2><p>在Flutter中，要使用<code>Material Design</code>库中的小部件，则需要导入<code>material.dart</code>包。要使用IOS样式的widget，请导入<code>Cupertino</code>库，要使用更基本的窗口widget集，请导入widget库，当然，也可以导入自己编写的widget：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/cupertino.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/widgets.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/my_widgets.dart'</span>;</span><br></pre></td></tr></table></figure>

<p>无论你导入哪个包，Dart都只会导入在您的应用中使用的widget。</p>
<blockquote>
<p>想知道Flutter都有哪些widget可以学习<a href="https://flutter.dev/docs/development/ui/widgets-intro" target="_blank" rel="noopener">《认识Flutter Widget》</a></p>
</blockquote>
<h2 id="编写Hello-world！"><a href="#编写Hello-world！" class="headerlink" title="编写Hello world！"></a>编写Hello world！</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/masterial.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(</span><br><span class="line">    Center(</span><br><span class="line">      child: Text(<span class="string">'hello world'</span>, <span class="attr">textDirection</span>: TextDirection.ltr),</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何使用Widget并将其qian’tao以形成Widget树"><a href="#如何使用Widget并将其qian’tao以形成Widget树" class="headerlink" title="如何使用Widget并将其qian’tao以形成Widget树"></a>如何使用Widget并将其qian’tao以形成Widget树</h2><p>在flutter中，几乎所有的东西都是widget</p>
<p>widget是用户界面的基本购置模块，您将widget组成一个层次机构，调用widget树。每个窗口的widget都嵌套在父窗口的widget中，并从其父窗口继承属性。甚至应用程序对象本身也是一个组件，没有单独的应用程序对象。相反，根widget担任此角色。</p>
<p>widget可以定义：</p>
<ul>
<li>结构元素 - 如按钮或菜单</li>
<li>文体元素 - 像字体或者颜色主题</li>
<li>类似布局的填充或对齐的一个方向</li>
</ul>
<p>以下示例使用<code>Material</code>库中的widget显示“hello world”应用程序。在此示例中，widget树嵌套在MaterialApp的根widget中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/masterial.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main () =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">'welcome to flutter'</span>,</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: Text(<span class="string">'welcome to flutter'</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: Center(</span><br><span class="line">          child: Text(<span class="string">'hello world'</span>),</span><br><span class="line">        )</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="自定义Widget"><a href="#自定义Widget" class="headerlink" title="自定义Widget"></a>自定义Widget</h2><p>在Flutter中，同样需要定义一个类来创建自定义widget，然后重用widget。您还可以定义和调用返回可重用小部件的函数，如以下示例中的构建函数所示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CustomWidget</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomCard</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> index;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> Function onPress;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  CustomCard(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.index, <span class="meta">@required</span> <span class="keyword">this</span>.onPress&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="function">Widget <span class="title">build</span><span class="params">(BuildContext context)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> Card(</span><br><span class="line">      child: Column(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Text(<span class="string">'card $index'</span>),</span><br><span class="line">          FlatButton(</span><br><span class="line">            child: Text(<span class="string">'press'</span>),</span><br><span class="line">            onPressed: <span class="keyword">this</span>.onPress,</span><br><span class="line">          )</span><br><span class="line">        ],</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// usage</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHomePage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> index = <span class="string">'111'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="function">Widget <span class="title">build</span><span class="params">(BuildContext context)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement build</span></span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">'welcome to flutter'</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        margin: EdgeInsets.only(top: <span class="number">12</span>, left: <span class="number">13</span>, right: <span class="number">10</span>),</span><br><span class="line">        color: Colors.red,</span><br><span class="line">        child: Row(</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            Text(<span class="string">'111'</span>),</span><br><span class="line">            CustomCard(</span><br><span class="line">              index: <span class="keyword">this</span>.index, </span><br><span class="line">              onPress: <span class="keyword">this</span>.onPress,</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onPress () &#123;</span><br><span class="line">    print(<span class="string">'1'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在前面的例子中，<code>CustomCard</code>类的构造函数使用Dart的大括号语法<code>{}</code>来配置</p>
<p>如果要标识必须的字段，请从构造函数中删除花括号，或者将<code>@required</code>添加到构造函数中去</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/20/dart/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xfFelix">
      <meta itemprop="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xfFelix的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/20/dart/" class="post-title-link" itemprop="url">dart</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-20 10:23:17 / 修改时间：22:48:39" itemprop="dateCreated datePublished" datetime="2020-03-20T10:23:17+08:00">2020-03-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Dart/" itemprop="url" rel="index"><span itemprop="name">Dart</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Dart入门"><a href="#Dart入门" class="headerlink" title="Dart入门"></a>Dart入门</h2><p>官网： <a href="https://dart.dev/guides/language/sound-dart" target="_blank" rel="noopener">https://dart.dev/guides/language/sound-dart</a></p>
<p>tutorialspoint: <a href="https://www.tutorialspoint.com/dart_programming/dart_programming_operators.htm" target="_blank" rel="noopener">https://www.tutorialspoint.com/dart_programming/dart_programming_operators.htm</a></p>
<h3 id="程序入口"><a href="#程序入口" class="headerlink" title="程序入口"></a>程序入口</h3><p>Dart中，每个app都必须要有一个顶级的<span style="background: #eee;
    border-radius: 3px;
    color: red;
    padding: 2px 4px;
    overflow-wrap: break-word;
    word-wrap: break-word;">main()</span>函数作为应用程序的入口。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">main()&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练一练 <a href="https://dartpad.dev/" target="_blank" rel="noopener">DartPad</a></p>
<blockquote>
<p><a href="https://dartpad.dev/" target="_blank" rel="noopener">DartPad</a>是Dart的线上的playground,提供Dart线上的playground还有：<a href="https://www.tutorialspoint.com/execute_dart_online.php" target="_blank" rel="noopener">Online Dart Compiler</a></p>
</blockquote>
<h3 id="控制台输出"><a href="#控制台输出" class="headerlink" title="控制台输出"></a>控制台输出</h3><p>要在dart中打印到控制台，可使用print：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(<span class="string">"hello world"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'hello world'</span>);</span><br></pre></td></tr></table></figure>

<p>练一练 <a href="https://dartpad.dev/" target="_blank" rel="noopener">DartPad</a></p>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>Dart是类型安全的 - 它使用静态类型检查和运行时的组合，检查以确保变量的值始终与变量的静态值匹配类型，尽管类型是必须的，但某些类型注释是可选的，因为Dart会执行类型推断。</p>
<h3 id="创建和分配变量"><a href="#创建和分配变量" class="headerlink" title="创建和分配变量"></a>创建和分配变量</h3><p>在JavaScript中，无法定义变量的类型。</p>
<p>在Dart中，变脸必须是明确的类型或系统能够解析的类型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaScript</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"JavaScript"</span>;</span><br><span class="line"><span class="comment">// Dart 以下俩种方式都可以</span></span><br><span class="line">String name = <span class="string">'dart'</span>;</span><br><span class="line"><span class="keyword">var</span> otherName = <span class="string">'Dart'</span>;</span><br></pre></td></tr></table></figure>

<p>更多信息可以查阅官网 <a href="https://dart.dev/guides/language/sound-dart" target="_blank" rel="noopener">Dart官网</a></p>
<h3 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h3><p>在Javascript中，未初始化的变量是<code>undefined</code></p>
<p>在Dart中，未初始化的变量的初始值为<code>null</code></p>
<blockquote>
<p>注意：数字在Dart中也被当做是对象，所以只要是带有数字类型的未初始化变量的值都是<code>null</code></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaScript</span></span><br><span class="line"><span class="keyword">var</span> name; <span class="comment">// == undefined</span></span><br><span class="line"><span class="comment">// Dart</span></span><br><span class="line"><span class="keyword">var</span> name; <span class="comment">// == null</span></span><br><span class="line"><span class="keyword">int</span> x; <span class="comment">// == null</span></span><br></pre></td></tr></table></figure>

<h3 id="检查Null或者0"><a href="#检查Null或者0" class="headerlink" title="检查Null或者0"></a>检查Null或者0</h3><p>在JavaScript中，null、undefined、0、false、’’都是false，其余都为true</p>
<blockquote>
<p>注意： 空数组（[]）,和空对象（{}）也是为true</p>
</blockquote>
<p>在Dart中，只有布尔值<code>&quot;true&quot;</code>被视为<code>true</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myNull;</span><br><span class="line"><span class="keyword">if</span> (myNull == <span class="literal">null</span>) &#123;</span><br><span class="line">  print(<span class="string">'use " == null" to check null'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> zero = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (zero == <span class="number">0</span>) &#123;</span><br><span class="line">  print(<span class="string">'use " == 0" to check zero'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="null的最佳检查"><a href="#null的最佳检查" class="headerlink" title="null的最佳检查"></a>null的最佳检查</h3><p>从Dart 1.12开始， <code>null-aware</code>运算符可以帮助我们做null检查</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">bool <span class="title">isConnected</span><span class="params">(a, b)</span> </span>&#123;</span><br><span class="line">  bool outConn = outgoing[a]?.contains(b) ?? <span class="keyword">false</span>;</span><br><span class="line">  bool outConn = outgoing[a]?.contains(b) ?? <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">return</span> outConn || inConn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>?.</code>运算符在左边为null的情况下会阻断右边的调用， <code>??</code>运算符主要作用是在左侧表达式为null时为其设置默认值。</p>
<p>对于表达式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">outgoing[a]?.contains(b)</span><br></pre></td></tr></table></figure>

<p>如果outgoing为null或outgoing[a]为null或者contains(b)的值为null，都会使表达式为null。</p>
<h3 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaScript</span></span><br><span class="line"><span class="function">function <span class="title">fn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Dart</span></span><br><span class="line">fn() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 也可以写作</span></span><br><span class="line"><span class="function">bool <span class="title">fn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="异步编程"><a href="#异步编程" class="headerlink" title="异步编程"></a>异步编程</h2><h3 id="Futures"><a href="#Futures" class="headerlink" title="Futures"></a>Futures</h3><p>与JavaScript一样，Dart支持单线程执行。在JavaScript中。<code>Promise</code>对象表示异步操作的最终完成（或失败）及其结果值，Dart使用<code>Future</code>来表示一部操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaScript</span></span><br><span class="line">_getIPAddress = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">"https://httpbin.org/ip"</span>;</span><br><span class="line">  <span class="keyword">return</span> fetch(url)</span><br><span class="line">          .then(response =&gt; response.json())</span><br><span class="line">          .then(responseJson =&gt; &#123;</span><br><span class="line">            console.log(responseJson.origin);</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="keyword">catch</span>(e =&gt; &#123;</span><br><span class="line">            console.error(e)</span><br><span class="line">          &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Dart</span></span><br><span class="line">_getIPAddress () &#123;</span><br><span class="line">  <span class="keyword">final</span> url = <span class="string">'https://httpbin.org/ip'</span>;</span><br><span class="line">  HttpRequest.request(url).then((value) &#123;</span><br><span class="line">    print(json.decode(value.responseText)[<span class="string">'origin'</span>]);</span><br><span class="line">  &#125;).carchError((error) =&gt; print(error));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Async与Await"><a href="#Async与Await" class="headerlink" title="Async与Await"></a>Async与Await</h3><p><code>async</code>函数声明定义了一个异步函数</p>
<p>在Dart中，<code>async</code>函数返回一个<code>Future</code>，函数的主体是稍后执行。<code>await</code>运算符用于等待<code>Future</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">_getIPAddress () &#123;</span><br><span class="line">  final url = <span class="string">'https://httpbin.org/ip'</span>;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> request = <span class="keyword">await</span> HttpRequest.request(url);</span><br><span class="line">    <span class="built_in">String</span> ip = json.decode(request.responseText)[<span class="string">'origin'</span>];</span><br><span class="line">    print(ip);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    print(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/19/flutter-android-asr/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xfFelix">
      <meta itemprop="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xfFelix的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/19/flutter-android-asr/" class="post-title-link" itemprop="url">flutter引入百度AI智能语音(Android)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-19 10:17:25" itemprop="dateCreated datePublished" datetime="2020-03-19T10:17:25+08:00">2020-03-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-20 22:48:39" itemprop="dateModified" datetime="2020-03-20T22:48:39+08:00">2020-03-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/flutter/" itemprop="url" rel="index"><span itemprop="name">flutter</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p>百度语音AI文档：<a href="https://ai.baidu.com/ai-doc/SPEECH/Ck38lxglg" target="_blank" rel="noopener">https://ai.baidu.com/ai-doc/SPEECH/Ck38lxglg</a></p>
<p>SDK: <a href="https://ai.baidu.com/sdk#asr" target="_blank" rel="noopener">https://ai.baidu.com/sdk#asr</a></p>
<h2 id="添加asr-plugin"><a href="#添加asr-plugin" class="headerlink" title="添加asr_plugin"></a>添加asr_plugin</h2><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">file</span> -&gt;</span> <span class="function"><span class="title">new</span>  -&gt;</span> N<span class="function"><span class="title">ew</span> Module... -&gt;</span> Android Library</span><br></pre></td></tr></table></figure>

<img src="/2020/03/19/flutter-android-asr/2.png" class="" title="Android Library">

<img src="/2020/03/19/flutter-android-asr/3.png" class="" title="asr_plugin">

<h3 id="下载Sdk"><a href="#下载Sdk" class="headerlink" title="下载Sdk #"></a>下载Sdk <strong><sup><a href="https://ai.baidu.com/sdk#asr" target="_blank" rel="noopener">#</a></strong></h3><img src="/2020/03/19/flutter-android-asr/4.png" class="" title="Sdk下载">

<p>解压SDK,</p>
<p>找到<code>core -&gt; libs -&gt; bdasr-**.jar</code>文件夹,复制到<code>asr_plugin/libs</code>下</p>
<p>找到<code>core -&gt; src -&gt; main -&gt; jniLibs</code>文件夹,复制到<code>asr_plugin/src/main</code>下</p>
<p>删除<code>jniLibs</code>下的<code>armeabi</code>与<code>armeabi-v7a</code>文件夹</p>
<p>打开<code>arm64-v8a</code>,<code>x86</code>,<code>x86_64</code></p>
<p>保留<code>libBaiduSpeechSDK.so</code>和<code>libvad.dnn.so</code>文件，其他全部删除</p>
<img src="/2020/03/19/flutter-android-asr/5.png" class="" title="asr_plugin">

<h3 id="添加keep"><a href="#添加keep" class="headerlink" title="添加keep"></a>添加keep</h3><p><code>asr_plugin/proguard-rules.pro</code>文件下，添加</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-keep <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">baidu</span>.<span class="title">speech</span>.**</span>&#123;*;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改AndroidManifest-xml"><a href="#修改AndroidManifest-xml" class="headerlink" title="修改AndroidManifest.xml"></a>修改AndroidManifest.xml</h3><p>打开<code>asr_plugin/manifests/AndroidManifest.xml</code>，添加</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.RECORD_AUDIO"</span> /&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.INTERNET"</span> /&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span><br><span class="line">&lt;application&gt;</span><br><span class="line">  &lt;meta-data android:name=<span class="string">"com.baidu.speech.APP_ID"</span></span><br><span class="line">      android:value=<span class="string">"9788136"</span> /&gt;</span><br><span class="line">  &lt;meta-data</span><br><span class="line">      android:name=<span class="string">"com.baidu.speech.API_KEY"</span></span><br><span class="line">      android:value=<span class="string">"0GjQNO5H4pGPf9HyA3AmZEbz"</span> /&gt;</span><br><span class="line">  &lt;meta-data</span><br><span class="line">      android:name=<span class="string">"com.baidu.speech.SECRET_KEY"</span></span><br><span class="line">      android:value=<span class="string">"db981ef3ec647ba8a09b599ad7447a24"</span> /&gt;</span><br><span class="line">&lt;/application&gt;</span><br></pre></td></tr></table></figure>

<p>APP_ID,API_KEY,SECRET_KEY需要自己创建</p>
<img src="/2020/03/19/flutter-android-asr/6.png" class="" title="AndroidManifest">

<h2 id="修改app-build-gradle"><a href="#修改app-build-gradle" class="headerlink" title="修改app/build.gradle"></a>修改app/build.gradle</h2><p>在<code>dependencies</code>下，加入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">implementation <span class="title">project</span><span class="params">(<span class="string">':asr_plugin'</span>)</span></span></span><br></pre></td></tr></table></figure>

<img src="/2020/03/19/flutter-android-asr/7.png" class="" title="app&#x2F;build.gradle">

<p>运行app/build.gradle</p>
<blockquote>
<p>注意： 比较<code>app/build.gradle</code>与<code>asr_plugin/build.gradle</code>的<code>compileSdkVersion</code>版本，版本不对会报错</p>
</blockquote>
<p>如果发生以下错误</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Error Message: Manifest merger failed : Attribute application<span class="meta">@appComponentFactory</span> value=(android.support.v4.app.CoreComponentFactory) from [com.android.support:support-compat:<span class="number">28.0</span><span class="number">.0</span>]</span><br><span class="line">AndroidManifest.xml:<span class="number">22</span>:<span class="number">18</span>-<span class="number">91</span> is also present at [androidx.core:core:<span class="number">1.0</span><span class="number">.0</span>]</span><br><span class="line">AndroidManifest.xml:<span class="number">22</span>:<span class="number">18</span>-<span class="number">86</span> value=(androidx.core.app.CoreComponentFactory).</span><br></pre></td></tr></table></figure>

<p>在项目根目录下找到<code>gradle.properties</code>文件，添加</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android.useAndroidX=<span class="keyword">true</span></span><br><span class="line">android.enableJetifier=<span class="keyword">true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Stackoverflow: <a href="https://stackoverflow.com/questions/51793345/android-material-and-appcompat-manifest-merger-failed/54160351" target="_blank" rel="noopener">https://stackoverflow.com/questions/51793345/android-material-and-appcompat-manifest-merger-failed/54160351</a></p>
</blockquote>
<p>运行成功代表引入成功</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/vue-wepay/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xfFelix">
      <meta itemprop="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xfFelix的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/vue-wepay/" class="post-title-link" itemprop="url">微信支付(Vue)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-18 11:53:20 / 修改时间：23:09:04" itemprop="dateCreated datePublished" datetime="2020-03-18T11:53:20+08:00">2020-03-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/vue/" itemprop="url" rel="index"><span itemprop="name">vue</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p>公众号官网链接： <a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html" target="_blank" rel="noopener">https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html</a></p>
<p>微信支付官网链接： <a href="https://pay.weixin.qq.com/wiki/doc/api/index.html" target="_blank" rel="noopener">https://pay.weixin.qq.com/wiki/doc/api/index.html</a></p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="1-网页授权"><a href="#1-网页授权" class="headerlink" title="1.网页授权"></a>1.网页授权</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 参考链接(请在微信客户端中打开此链接体验):</span><br><span class="line"></span><br><span class="line">// scope为snsapi_base</span><br><span class="line"></span><br><span class="line">https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx520c15f417810387&amp;redirect_uri=https%3A%2F%2Fchong.qq.com%2Fphp%2Findex.php%3Fd%3D%26c%3DwxAdapter%26m%3DmobileDeal%26showwxpaytitle%3D1%26vb2ctag%3D4_2030_5_1194_60&amp;response_type=code&amp;scope=snsapi_base&amp;state=123#wechat_redirect</span><br><span class="line"></span><br><span class="line">// scope为snsapi_userinfo</span><br><span class="line"></span><br><span class="line">https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf0e81c3bee622d60&amp;redirect_uri=http%3A%2F%2Fnba.bluewebgame.com%2Foauth_response.php&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=STATE#wechat_redirect</span><br></pre></td></tr></table></figure>

<blockquote>
<p>尤其注意：跳转回调redirect_uri，应当使用https链接来确保授权code的安全性。不可以使用<code>localhost</code>, <code>127.0.0.1</code>, <code>0.0.0.0</code></p>
</blockquote>
<p>用户同意授权后</p>
<p>如果用户同意授权，页面将跳转至 redirect_uri/?code=CODE&amp;state=STATE。</p>
<blockquote>
<p>code说明 ： code作为换取access_token的票据，每次用户授权带上的code将不一样，code只能使用一次，5分钟未被使用自动过期。</p>
</blockquote>
<p>例： </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">created() &#123;</span><br><span class="line">  <span class="keyword">this</span>.getAuthorize()</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// 获取location.href上的code</span></span><br><span class="line">  getCode() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; code &#125; = getArgs()</span><br><span class="line">    <span class="built_in">console</span>.log(code)</span><br><span class="line">    <span class="keyword">if</span> (code) &#123;</span><br><span class="line">      <span class="keyword">this</span>.code = code</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getAuthorize () &#123;</span><br><span class="line">    <span class="comment">// 判断PC环境</span></span><br><span class="line">    <span class="keyword">if</span> (isPC()) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// 判断是否微信环境</span></span><br><span class="line">    <span class="keyword">if</span> (!isWeixin()) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// 判断是否已经获取code</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.getCode()) &#123;</span><br><span class="line">      <span class="comment">// 链接必须urlEncode</span></span><br><span class="line">      <span class="built_in">window</span>.location.href = <span class="string">`https://open.weixin.qq.com/connect/oauth2/authorize?appid=<span class="subst">$&#123;APP_ID&#125;</span>&amp;redirect_uri=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(REDIRECT_URI)&#125;</span>&amp;response_type=code&amp;scope=snsapi_base&amp;state=123#wechat_redirect`</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 触发微信支付按钮</span></span><br><span class="line">  wxScope() &#123;</span><br><span class="line">    <span class="keyword">if</span> (isPC()) <span class="keyword">return</span> <span class="keyword">this</span>.Toast(<span class="string">'PC端暂不支持微信支付'</span>)</span><br><span class="line">    <span class="keyword">if</span> (isWeixin()) &#123;</span><br><span class="line">      <span class="comment">// 使用JsApi支付</span></span><br><span class="line">      <span class="keyword">this</span>.payByJsApi()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 使用H5支付</span></span><br><span class="line">      <span class="keyword">this</span>.payByH5()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-使用code获取签名等参数"><a href="#2-使用code获取签名等参数" class="headerlink" title="2.使用code获取签名等参数"></a>2.使用code获取签名等参数</h3><p>微信支付有俩种方式：</p>
<p><strong>一. WeixinJSBridge</strong></p>
<p>采用在微信环境调用<code>WeixinJSBridge</code>变量的方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onBridgeReady</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   WeixinJSBridge.invoke(</span><br><span class="line">      <span class="string">'getBrandWCPayRequest'</span>, &#123;</span><br><span class="line">         <span class="string">"appId"</span>:<span class="string">"wx2421b1c4370ec43b"</span>,     <span class="comment">//公众号名称，由商户传入     </span></span><br><span class="line">         <span class="string">"timeStamp"</span>:<span class="string">"1395712654"</span>,         <span class="comment">//时间戳，自1970年以来的秒数     </span></span><br><span class="line">         <span class="string">"nonceStr"</span>:<span class="string">"e61463f8efa94090b1f366cccfbbb444"</span>, <span class="comment">//随机串     </span></span><br><span class="line">         <span class="string">"package"</span>:<span class="string">"prepay_id=u802345jgfjsdfgsdg888"</span>,     </span><br><span class="line">         <span class="string">"signType"</span>:<span class="string">"MD5"</span>,         <span class="comment">//微信签名方式：     </span></span><br><span class="line">         <span class="string">"paySign"</span>:<span class="string">"70EA570631E4BB79628FBCA90534C63FF7FADD89"</span> <span class="comment">//微信签名 </span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(res.err_msg == <span class="string">"get_brand_wcpay_request:ok"</span> )&#123;</span><br><span class="line">      <span class="comment">// 使用以上方式判断前端返回,微信团队郑重提示：</span></span><br><span class="line">            <span class="comment">//res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。</span></span><br><span class="line">      &#125; </span><br><span class="line">   &#125;); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge == <span class="string">"undefined"</span>)&#123;</span><br><span class="line">   <span class="keyword">if</span>( <span class="built_in">document</span>.addEventListener )&#123;</span><br><span class="line">       <span class="built_in">document</span>.addEventListener(<span class="string">'WeixinJSBridgeReady'</span>, onBridgeReady, <span class="literal">false</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent)&#123;</span><br><span class="line">       <span class="built_in">document</span>.attachEvent(<span class="string">'WeixinJSBridgeReady'</span>, onBridgeReady); </span><br><span class="line">       <span class="built_in">document</span>.attachEvent(<span class="string">'onWeixinJSBridgeReady'</span>, onBridgeReady);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   onBridgeReady();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：这种方法有时会产生<code>WeixinJSBridge is not defined</code>的错误，因为在其他非微信环境是找不到<code>WeixinJSBridge</code>这个变量的</p>
</blockquote>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">payByBridge() &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge == <span class="string">"undefined"</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>( <span class="built_in">document</span>.addEventListener )&#123;</span><br><span class="line">        <span class="built_in">document</span>.addEventListener(<span class="string">'WeixinJSBridgeReady'</span>, <span class="keyword">this</span>.onBridgeReady, <span class="literal">false</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent)&#123;</span><br><span class="line">        <span class="built_in">document</span>.attachEvent(<span class="string">'WeixinJSBridgeReady'</span>, <span class="keyword">this</span>.onBridgeReady);</span><br><span class="line">        <span class="built_in">document</span>.attachEvent(<span class="string">'onWeixinJSBridgeReady'</span>, <span class="keyword">this</span>.onBridgeReady);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.onBridgeReady();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">onBridgeReady()&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; appId, timeStamp, nonceStr, signType, paySign &#125; = <span class="keyword">this</span>.wxConfig</span><br><span class="line">  WeixinJSBridge.invoke(</span><br><span class="line">      <span class="string">'getBrandWCPayRequest'</span>, &#123;</span><br><span class="line">        appId,     <span class="comment">//公众号名称，由商户传入</span></span><br><span class="line">        timeStamp,         <span class="comment">//时间戳，自1970年以来的秒数</span></span><br><span class="line">        nonceStr, <span class="comment">//随机串</span></span><br><span class="line">        package: <span class="keyword">this</span>.wxConfig.package,</span><br><span class="line">        signType,         <span class="comment">//微信签名方式：</span></span><br><span class="line">        paySign <span class="comment">//微信签名</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(res.err_msg == <span class="string">"get_brand_wcpay_request:ok"</span> )&#123;</span><br><span class="line">        <span class="comment">// 使用以上方式判断前端返回,微信团队郑重提示：</span></span><br><span class="line">        <span class="comment">//res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。</span></span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><strong>二. JS-SDK</strong></p>
<p>步骤一：绑定域名<br>先登录微信公众平台进入“公众号设置”的“功能设置”里填写“JS接口安全域名”。</p>
<p>备注：登录后可在“开发者中心”查看对应的接口权限。</p>
<p>步骤二：引入JS文件</p>
<p>任选以下一种方式：</p>
<ol>
<li><p>在需要调用JS接口的页面引入如下JS文件，（支持https）：<a href="http://res.wx.qq.com/open/js/jweixin-1.6.0.js" target="_blank" rel="noopener">http://res.wx.qq.com/open/js/jweixin-1.6.0.js</a></p>
</li>
<li><p>如需进一步提升服务稳定性，当上述资源不可访问时，可改访问：<a href="http://res2.wx.qq.com/open/js/jweixin-1.6.0.js" target="_blank" rel="noopener">http://res2.wx.qq.com/open/js/jweixin-1.6.0.js</a> （支持https）。</p>
</li>
<li><p>npm i weixin-js-sdk –save<br>import wx from ‘weixin-js-sdk’</p>
</li>
</ol>
<p>备注：支持使用 AMD/CMD 标准模块加载方法加载</p>
<p>步骤三：通过config接口注入权限验证配置</p>
<p>所有需要使用JS-SDK的页面必须先注入配置信息，否则将无法调用（同一个url仅需调用一次，对于变化url的SPA的web app可在每次url变化时进行调用,目前Android微信客户端不支持pushState的H5新特性，所以使用pushState来实现web app的页面会导致签名失败，此问题会在Android6.2中修复）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wx.config(&#123;</span><br><span class="line">  debug: <span class="literal">true</span>, <span class="comment">// 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。</span></span><br><span class="line">  appId: <span class="string">''</span>, <span class="comment">// 必填，公众号的唯一标识</span></span><br><span class="line">  timestamp: , <span class="comment">// 必填，生成签名的时间戳</span></span><br><span class="line">  nonceStr: <span class="string">''</span>, <span class="comment">// 必填，生成签名的随机串</span></span><br><span class="line">  signature: <span class="string">''</span>,<span class="comment">// 必填，签名</span></span><br><span class="line">  jsApiList: [] <span class="comment">// 必填，需要使用的JS接口列表</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>步骤四：通过ready接口处理成功验证</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>步骤五：通过error接口处理失败验证</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.error(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>接口调用说明<br>所有接口通过wx对象(也可使用jWeixin对象)来调用，参数是一个对象，除了每个接口本身需要传的参数之外，还有以下通用参数：</p>
<ol>
<li>success：接口调用成功时执行的回调函数。</li>
<li>fail：接口调用失败时执行的回调函数。</li>
<li>complete：接口调用完成时执行的回调函数，无论成功或失败都会执行。</li>
<li>cancel：用户点击取消时的回调函数，仅部分有用户取消操作的api才会用到。</li>
<li>trigger: 监听Menu中的按钮点击时触发的方法，该方法仅支持Menu中的相关接口。<br>备注：不要尝试在trigger中使用ajax异步请求修改本次分享的内容，因为客户端分享操作是一个同步操作，这时候使用ajax的回包会还没有返回。</li>
</ol>
<p>以上几个函数都带有一个参数，类型为对象，其中除了每个接口本身返回的数据之外，还有一个通用属性errMsg，其值格式如下：</p>
<p>调用成功时：”xxx:ok” ，其中xxx为调用的接口名</p>
<p>用户取消时：”xxx:cancel”，其中xxx为调用的接口名</p>
<p>调用失败时：其值为具体错误信息</p>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> payByJsApi () &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> token = getToken()</span><br><span class="line">    <span class="keyword">this</span>.Indicator.open(&#123;</span><br><span class="line">      spinnerType: <span class="string">'double-bounce'</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 调用获取签名接口</span></span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="keyword">this</span>.axios(testUrl + api.saveOrderByCart, &#123;token, <span class="attr">id</span>: <span class="keyword">this</span>.addressDef.id, <span class="attr">payMethod</span>: <span class="number">0</span>, <span class="attr">wxCode</span>: <span class="keyword">this</span>.code&#125;, <span class="string">'post'</span>)</span><br><span class="line">    <span class="keyword">this</span>.Indicator.close()</span><br><span class="line">    <span class="keyword">if</span> (res.error_code) <span class="keyword">return</span> <span class="keyword">this</span>.Toast(res.message)</span><br><span class="line">    <span class="keyword">this</span>.wxConfig = res.data</span><br><span class="line">    <span class="keyword">this</span>.payByWechat()</span><br><span class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(e.message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">payByWechat() &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; appId, timeStamp, nonceStr, signType, paySign, orderId &#125; = <span class="keyword">this</span>.wxConfig</span><br><span class="line">  <span class="keyword">let</span> _this = <span class="keyword">this</span></span><br><span class="line">  wx.config(&#123;</span><br><span class="line">    debug: <span class="literal">false</span>, <span class="comment">// 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。</span></span><br><span class="line">    appId, <span class="comment">// 必填，公众号的唯一标识</span></span><br><span class="line">    timestamp: timeStamp, <span class="comment">// 必填，生成签名的时间戳</span></span><br><span class="line">    nonceStr, <span class="comment">// 必填，生成签名的随机串</span></span><br><span class="line">    signature: paySign,<span class="comment">// 必填，签名</span></span><br><span class="line">    jsApiList: [<span class="string">'checkJsApi'</span>, <span class="string">'chooseWXPay'</span>] <span class="comment">// 必填，需要使用的JS接口列表</span></span><br><span class="line">  &#125;)</span><br><span class="line">  wx.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。</span></span><br><span class="line">    wx.checkJsApi(&#123;</span><br><span class="line">      jsApiList: [<span class="string">'chooseWXPay'</span>],</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 以键值对的形式返回，可用的api值true，不可用为false</span></span><br><span class="line">        <span class="comment">// 如：&#123;"checkResult":&#123;"chooseImage":true&#125;,"errMsg":"checkJsApi:ok"&#125;</span></span><br><span class="line">        <span class="keyword">if</span> (res.checkResult.chooseWXPay) &#123;</span><br><span class="line">          wx.chooseWXPay(&#123;</span><br><span class="line">            timestamp: timeStamp, <span class="comment">// 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符</span></span><br><span class="line">            nonceStr, <span class="comment">// 支付签名随机串，不长于 32 位</span></span><br><span class="line">            package: _this.wxConfig.package, <span class="comment">// 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\*\*\*）</span></span><br><span class="line">            signType, <span class="comment">// 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'</span></span><br><span class="line">            paySign, <span class="comment">// 支付签名</span></span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">              <span class="comment">// 支付成功后的回调函数</span></span><br><span class="line">              <span class="comment">// this.Toast('下单成功')</span></span><br><span class="line">              <span class="comment">// this.$router.push(&#123; name: 'orderDetails', params: &#123; orderId: orderId &#125; &#125;)</span></span><br><span class="line">              _this.showSendCode = <span class="literal">false</span>;</span><br><span class="line">              _this.exchangeShow = <span class="literal">true</span>;</span><br><span class="line">              _this.parOrderId = orderId;</span><br><span class="line">              _this.clearPassword()</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          _this.Toast(<span class="string">'当前客户端版本不支持chooseWXPay接口'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  wx.error(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。</span></span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/18/Swiper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xfFelix">
      <meta itemprop="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xfFelix的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/18/Swiper/" class="post-title-link" itemprop="url">Swiper</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-18 10:58:53" itemprop="dateCreated datePublished" datetime="2020-03-18T10:58:53+08:00">2020-03-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-22 23:43:34" itemprop="dateModified" datetime="2020-05-22T23:43:34+08:00">2020-05-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>官网： <a href="https://www.swiper.com.cn/" target="_blank" rel="noopener">https://www.swiper.com.cn/</a></p>
<p>api文档： <a href="https://www.swiper.com.cn/api/index.html" target="_blank" rel="noopener">https://www.swiper.com.cn/api/index.html</a></p>
<h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-container"</span> <span class="attr">id</span>=<span class="string">"swiper1"</span>&gt;</span>....<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-container"</span> <span class="attr">id</span>=<span class="string">"swiper2"</span>&gt;</span>....<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-container"</span> <span class="attr">id</span>=<span class="string">"swiper3"</span>&gt;</span>....<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> swiper1 = <span class="keyword">new</span> Swiper(<span class="string">'#swiper1'</span>);</span><br><span class="line"><span class="keyword">var</span> swiper2 = <span class="keyword">new</span> Swiper(<span class="string">'#swiper2'</span>);</span><br><span class="line"><span class="keyword">var</span> swiper3 = <span class="keyword">new</span> Swiper(<span class="string">'#swiper3'</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span>&gt;</span>slider1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span>&gt;</span>slider2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span>&gt;</span>slider3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> mySwiper = <span class="keyword">new</span> Swiper(<span class="string">'.swiper-container'</span>, &#123;</span></span><br><span class="line"><span class="actionscript">  autoplay: <span class="literal">true</span>,<span class="comment">//可选选项，自动滑动</span></span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="comment">//如果你初始化时没有定义Swiper实例，后面也可以通过Swiper的HTML元素来获取该实例</span></span></span><br><span class="line"><span class="actionscript"><span class="keyword">new</span> Swiper(<span class="string">'.swiper-container'</span>)</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> mySwiper = <span class="built_in">document</span>.querySelector(<span class="string">'.swiper-container'</span>).swiper</span></span><br><span class="line">mySwiper.slideNext();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注： 详情请查阅api</p>
</blockquote>
<h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><h4 id="数据小于slidesPerView的值"><a href="#数据小于slidesPerView的值" class="headerlink" title="数据小于slidesPerView的值"></a>数据小于<code>slidesPerView</code>的值</h4><p>当<code>list.length</code> &lt; <code>slidesPerView</code>的值时，并且<code>loop: true</code>会产生数据重复</p>
<img src="/2020/03/18/Swiper/1.png" class="" title="数据重复">

<p>解决：</p>
<ul>
<li>删除<code>loop: true</code></li>
<li>设置<code>slidesPerView: list.length</code></li>
</ul>
<blockquote>
<p>注： 第二种方法会导致当<code>list.length: 1</code>时，会占满整个空间，例：</p>
</blockquote>
<img src="/2020/03/18/Swiper/2.png" class="" title="占满空间">

<h4 id="swiper与图片懒加载"><a href="#swiper与图片懒加载" class="headerlink" title="swiper与图片懒加载"></a>swiper与图片懒加载</h4><p>在swiper中添加图片时，最好不要使用v-lazy等图片懒加载功能，会使有的图片无法加载成功</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/17/hexo-theme/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xfFelix">
      <meta itemprop="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xfFelix的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/17/hexo-theme/" class="post-title-link" itemprop="url">hexo-theme</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-17 17:24:38 / 修改时间：23:42:01" itemprop="dateCreated datePublished" datetime="2020-03-17T17:24:38+08:00">2020-03-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="hexo-theme"><a href="#hexo-theme" class="headerlink" title="hexo-theme #"></a>hexo-theme <strong><sup><a href="https://github.com/theme-next/hexo-theme-next" target="_blank" rel="noopener">#</a></strong></h2><blockquote>
<p>注意：新版的 NexT 主题源码早已转移在了这个仓库 </p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">https://github.com/theme-next/hexo-theme-next</span></span><br></pre></td></tr></table></figure>
<p>还在使用5.0版本同学注意了，5.0版本已经不再更新，所有问题都不再解决，请下载7.0+版本</p>
</blockquote>
<h2 id="主题设置"><a href="#主题设置" class="headerlink" title="主题设置"></a>主题设置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment">#scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line">scheme: Pisces</span><br><span class="line"><span class="comment">#scheme: Gemini</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>Muse：默认 Scheme，这是 NexT 最初的版本，黑白主调，大量留白</p>
</li>
<li><p>Mist：Muse 的紧凑版本，整洁有序的单栏外观</p>
</li>
<li><p>Pisces：双栏 Scheme，小家碧玉似的清新</p>
</li>
<li><p>Gemini：左侧网站信息及目录，块+片段结构布局</p>
</li>
</ul>
<h2 id="动态背景"><a href="#动态背景" class="headerlink" title="动态背景"></a>动态背景</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Canvas-nest</span><br><span class="line">three_waves</span><br><span class="line">canvas_lines</span><br><span class="line">canvas_sphere</span><br></pre></td></tr></table></figure>

<p>设置方法很简单，直接设置里需要的动态背景为true。</p>
<h2 id="显示当前浏览进度"><a href="#显示当前浏览进度" class="headerlink" title="显示当前浏览进度"></a>显示当前浏览进度</h2><p>修改themes/next/_config.yml， scrollpercent 值由 false 改为 true：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Scroll percent label in b2t button</span></span><br><span class="line">scrollpercent: <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><del>这个在7.0+版本好像不行</del></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/14/git-exception/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xfFelix">
      <meta itemprop="description" content="一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xfFelix的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/14/git-exception/" class="post-title-link" itemprop="url">git question</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-14 22:34:20" itemprop="dateCreated datePublished" datetime="2020-03-14T22:34:20+08:00">2020-03-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-17 22:56:01" itemprop="dateModified" datetime="2020-06-17T22:56:01+08:00">2020-06-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Git-流程图"><a href="#Git-流程图" class="headerlink" title="Git 流程图"></a>Git 流程图</h2><p><img src="/2020/03/14/git-exception/2.png" alt></p>
<ul>
<li>Workspace：工作区</li>
<li>Index / Stage：暂存区</li>
<li>Repository：仓库区（或本地仓库）</li>
<li>Remote：远程仓库</li>
</ul>
<h2 id="fatal-HttpRequestException-encountered-发送请求时出错"><a href="#fatal-HttpRequestException-encountered-发送请求时出错" class="headerlink" title="fatal: HttpRequestException encountered. 发送请求时出错"></a>fatal: HttpRequestException encountered. 发送请求时出错</h2><p><img src="/2020/03/14/git-exception/1.png" alt></p>
<p>目前俩种解决方式</p>
<h3 id="下载Git-Credential-Manager-for-Windows最新版"><a href="#下载Git-Credential-Manager-for-Windows最新版" class="headerlink" title="下载Git-Credential-Manager-for-Windows最新版"></a>下载Git-Credential-Manager-for-Windows最新版</h3><p>Github 禁用了TLS v1.0 and v1.1，必须更新Windows的git凭证管理器。</p>
<p>更新管理器的方式有俩种</p>
<ol>
<li><a href="https://github.com/Microsoft/Git-Credential-Manager-for-Windows/releases" target="_blank" rel="noopener">https://github.com/Microsoft/Git-Credential-Manager-for-Windows/releases</a> 直接下载</li>
<li><a href="https://git-scm.com/downloads" target="_blank" rel="noopener">https://git-scm.com/downloads</a> 更新git客户端</li>
</ol>
<h3 id="设置git-config"><a href="#设置git-config" class="headerlink" title="设置git config"></a>设置git config</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.查看git配置信息</span></span><br><span class="line">$ git config --list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.查看git用户名、密码、邮箱的配置</span></span><br><span class="line">$ git config user.name</span><br><span class="line">$ git config user.password</span><br><span class="line">$ git config user.email</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.设置git用户名、密码、邮箱的配置</span></span><br><span class="line">$ git config user.name <span class="string">"freedom"</span></span><br><span class="line">$ git config user.password <span class="string">"123456"</span></span><br><span class="line">$ git config user.email <span class="string">"1548429568@qq.com"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.设置git用户名、密码、邮箱的配置（全局配置）</span></span><br><span class="line">$ git config --global user.name 用户命</span><br><span class="line">$ git config --global user.name freedom</span><br><span class="line">$ git config --global user.password 密码</span><br><span class="line">$ git config --global user.password abc0506abc</span><br><span class="line">$ git config --global user.email 邮箱</span><br><span class="line">$ git config --global user.email <span class="string">"1548429568@qq.com"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.设置代理</span></span><br><span class="line">git config --global https.proxy http://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line">git config --global https.proxy https://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line">git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line"></span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看git config列表</span></span><br><span class="line">git config --list</span><br></pre></td></tr></table></figure>

<h2 id="git-commit后撤销"><a href="#git-commit后撤销" class="headerlink" title="git commit后撤销"></a>git commit后撤销</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft HEAD^</span><br></pre></td></tr></table></figure>

<p>这样就成功的撤销了你的commit</p>
<blockquote>
<p>注意，仅仅是撤回commit操作，您写的代码仍然保留。</p>
</blockquote>
<p>HEAD^的意思是上一个版本，也可以写成HEAD~1</p>
<p>如果你进行了2次commit，想都撤回，可以使用HEAD~2</p>
<h2 id="git-stash-暂存"><a href="#git-stash-暂存" class="headerlink" title="git stash 暂存"></a>git stash 暂存</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash 暂存</span><br><span class="line"></span><br><span class="line">git stash pop 返回上次数据</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="xfFelix"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">xfFelix</p>
  <div class="site-description" itemprop="description">一直坚持永远比三分钟热度要重要得多，就算每天努力一点点也比一开始努力后来熄火要好，成功总是积少成多，厚积薄发</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">28</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xfFelix</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
